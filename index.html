<html>
	<head>
		<script src="http://code.jquery.com/jquery-2.0.0.min.js"></script>
		<script src="/js/support.js"></script>
		<script>
			var rm1 = { 'boxes': [[2,2]],
				'pillars': [[1,1],[1,3],[2,1]],
				'exit': [3,2],
				'dim': [3,3],
				'spawn': [1,2]
			};
			var room;
			var keysDown = [];
			keysDown[32] = false;
			keysDown[37] = false;
			keysDown[38] = false;
			keysDown[39] = false;
			keysDown[40] = false;
			var dirMap = [];
			dirMap[37] = 'l';
			dirMap[38] = 'u';
			dirMap[39] = 'r';
			dirMap[40] = 'd';
			var isOppDir = function(d1, d2){
				switch(d1){
					case 'u':
						return d2 == 'd';
						break;
					case 'd':
						return d2 == 'u';
						break;
					case 'l':
						return d2 == 'r';
						break;
					case 'r':
						return d2 == 'l';
						break;
				}
			}
		</script>
		<script src="/js/renderer.js"></script>
		<script src="/js/item.js"></script>
		<script src="/js/player.js"></script>
		<script src="/js/pillar.js"></script>
		<script src="/js/box.js"></script>
		<script src="/js/room.js"></script>
		<script>
			$(document).ready(function(){
				room = new Room(rm1);
			});

			// l 37, u 38, r 39, d 40, space 32
			$(document).keydown(function(e){
				if([37,38,39,40,32].indexOf(e.which) > -1){
					keysDown[e.which] = true;
					e.preventDefault();
					if(e.which != 32 && !room.player.moving ){
						room.checkMove();
					}
				}
			});
			$(document).keyup(function(e){
				if([37,38,39,40,32].indexOf(e.which) > -1){
					keysDown[e.which] = false;
					e.preventDefault();
				}
			});
		</script>

		<style>
			#cargo-hold ul {
				list-style: none;
				float: left;
				margin: 0;
				padding: 0;
				background: url(/imgs/floor.gif);
			}
			#cargo-hold ul li {
				padding:0;
				margin:0;
			}
			#cargo-hold ul li, img {
				height: 40px;
				width: 40px;
			}

			#cache {
				height: 0px;
				width: 0px;
				overflow: hidden;
			}

			li.exit {
				background: url(/imgs/exit.gif);
				background-size: 100% 100%;
			}
		</style>
	</head>
	<body>
		<h1>Escape!</h1>
		<p>Use arrows to move, and the Space bar to grab on to the box in front of you.</p>
		<div id="cargo-hold"></div>
		<div id="cache"></div>
	</body>
</html>